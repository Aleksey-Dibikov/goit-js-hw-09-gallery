{"version":3,"sources":["app.js"],"names":["galleryItems","preview","original","description","refs","galleryListElementRef","document","querySelector","modalWindowRef","modalClosedButton","lightboxContentRef","lightboxImgRef","lightboxOverlay","activeIndex","galleryItemElements","addGalleryListImg","allElements","map","onOpenModal","e","preventDefault","target","nodeName","forEach","el","index","dataset","source","classList","add","src","alt","window","addEventListener","keyboardManipulation","onModalClose","remove","removeEventListener","key","length","insertAdjacentHTML","join"],"mappings":";AAAA,IAAMA,EAAe,CACnB,CACEC,QACE,uFACFC,SACE,uFACFC,YAAa,mBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,6BAEf,CACEF,QACE,wEACFC,SACE,wEACFC,YAAa,qBAEf,CACEF,QACE,0EACFC,SACE,0EACFC,YAAa,iBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,oBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,yBAEf,CACEF,QACE,2EACFC,SACE,2EACFC,YAAa,yBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,oBAEf,CACEF,QACE,6EACFC,SACE,6EACFC,YAAa,yBAIXC,EAAO,CACXC,sBAAuBC,SAASC,cAAc,eAC9CC,eAAgBF,SAASC,cAAc,gBACvCE,kBAAmBH,SAASC,cAAc,qBAC1CG,mBAAoBJ,SAASC,cAAc,sBAC3CI,eAAgBL,SAASC,cAAc,oBACvCK,gBAAiBN,SAASC,cAAc,uBAGtCM,EAAc,KAEZC,EAAsB,SAAwC,GAArCb,IAAAA,EAAAA,EAAAA,QAASC,EAAAA,EAAAA,SAAUC,EAAAA,EAAAA,YASzCY,MAN2Bb,iEAAAA,OAAAA,EAEvBD,qDAAAA,OAAAA,EAAwBC,kBAAAA,OAAAA,EACxBC,kBAAAA,OAAAA,EALX,4BAUIa,EAAchB,EAAaiB,IAAIH,GAOrC,SAASI,EAAYC,GACnBA,EAAEC,iBAEwB,QAAtBD,EAAEE,OAAOC,WAWbtB,EAAauB,QAAQ,SAACC,EAAIC,GACpBD,EAAGtB,WAAaiB,EAAEE,OAAOK,QAAQC,SACnCd,EAAcY,KAIlBrB,EAAKI,eAAeoB,UAAUC,IAAI,WAClCzB,EAAKO,eAAemB,IAAMX,EAAEE,OAAOK,QAAQC,OAC3CvB,EAAKO,eAAeoB,IAAMZ,EAAEE,OAAOU,IAEnCC,OAAOC,iBAAiB,UAAWC,IAGrC,SAASC,EAAahB,GACO,SAAvBA,MAAAA,OAAAA,EAAAA,EAAGE,OAAOC,YAGdlB,EAAKI,eAAeoB,UAAUQ,OAAO,WACrChC,EAAKO,eAAemB,IAAM,GAC1B1B,EAAKO,eAAeoB,IAAM,GAE1BC,OAAOK,oBAAoB,UAAWH,IAWxC,SAASA,EAA8B,GAC7BI,OADsBA,EAAAA,KAEvB,IAAA,SACHH,IACA,MAEGtB,KAAAA,EAAcb,EAAauC,OAAS,GAAK,aAC5C1B,GAAe,EACfT,EAAKO,eAAemB,IAAM9B,EAAaa,GAAaX,SACpD,MACGW,KAAAA,EAAc,GAAK,YACtBA,GAAe,EACfT,EAAKO,eAAemB,IAAM9B,EAAaa,GAAaX,SACpD,MAEGW,KAAAA,IAAgBb,EAAauC,OAAS,GAAK,aAC9C1B,EAAc,EACdT,EAAKO,eAAemB,IAAM9B,EAAaa,GAAaX,SACpD,MACGW,KAAgB,IAAhBA,GAAqB,YACxBA,EAAcb,EAAauC,OAAS,EACpCnC,EAAKO,eAAemB,IAAM9B,EAAaa,GAAaX,UAzE1DE,EAAKC,sBAAsBmC,mBAAmB,aAAcxB,EAAYyB,KAAK,MAE7ErC,EAAKC,sBAAsB4B,iBAAiB,QAASf,GACrDd,EAAKK,kBAAkBwB,iBAAiB,QAASE,GACjD/B,EAAKQ,gBAAgBqB,iBAAiB,QAASE","file":"app.f8457f5a.js","sourceRoot":"..\\src","sourcesContent":["const galleryItems = [\r\n  {\r\n    preview:\r\n      'https://cdn.pixabay.com/photo/2019/05/14/16/43/himilayan-blue-poppy-4202825__340.jpg',\r\n    original:\r\n      'https://cdn.pixabay.com/photo/2019/05/14/16/43/himilayan-blue-poppy-4202825_1280.jpg',\r\n    description: 'Hokkaido Flower',\r\n  },\r\n  {\r\n    preview:\r\n      'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677__340.jpg',\r\n    original:\r\n      'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677_1280.jpg',\r\n    description: 'Container Haulage Freight',\r\n  },\r\n  {\r\n    preview:\r\n      'https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785__340.jpg',\r\n    original:\r\n      'https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785_1280.jpg',\r\n    description: 'Aerial Beach View',\r\n  },\r\n  {\r\n    preview:\r\n      'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619__340.jpg',\r\n    original:\r\n      'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619_1280.jpg',\r\n    description: 'Flower Blooms',\r\n  },\r\n  {\r\n    preview:\r\n      'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334__340.jpg',\r\n    original:\r\n      'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334_1280.jpg',\r\n    description: 'Alpine Mountains',\r\n  },\r\n  {\r\n    preview:\r\n      'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571__340.jpg',\r\n    original:\r\n      'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571_1280.jpg',\r\n    description: 'Mountain Lake Sailing',\r\n  },\r\n  {\r\n    preview:\r\n      'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272__340.jpg',\r\n    original:\r\n      'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272_1280.jpg',\r\n    description: 'Alpine Spring Meadows',\r\n  },\r\n  {\r\n    preview:\r\n      'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255__340.jpg',\r\n    original:\r\n      'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255_1280.jpg',\r\n    description: 'Nature Landscape',\r\n  },\r\n  {\r\n    preview:\r\n      'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843__340.jpg',\r\n    original:\r\n      'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843_1280.jpg',\r\n    description: 'Lighthouse Coast Sea',\r\n  },\r\n];\r\n\r\nconst refs = {\r\n  galleryListElementRef: document.querySelector('.js-gallery'),\r\n  modalWindowRef: document.querySelector('.js-lightbox'),\r\n  modalClosedButton: document.querySelector('.lightbox__button'),\r\n  lightboxContentRef: document.querySelector('.lightbox__content'),\r\n  lightboxImgRef: document.querySelector('.lightbox__image'),\r\n  lightboxOverlay: document.querySelector('.lightbox__overlay'),\r\n};\r\n\r\nlet activeIndex = null;\r\n\r\nconst galleryItemElements = ({ preview, original, description }) => {\r\n  const addGalleryListImg =\r\n  `<li class=\"gallery__item\">\r\n    <a class=\"gallery__link\" href=${original}>\r\n      <img class=\"gallery__image\"\r\n      src=\"${preview}\" data-source=${original} \r\n      alt=\"${description}\">\r\n    </a>  \r\n  </li>`;\r\n  return addGalleryListImg;\r\n};\r\nconst allElements = galleryItems.map(galleryItemElements);\r\nrefs.galleryListElementRef.insertAdjacentHTML('afterbegin', allElements.join(' '));\r\n\r\nrefs.galleryListElementRef.addEventListener(\"click\", onOpenModal);\r\nrefs.modalClosedButton.addEventListener(\"click\", onModalClose);\r\nrefs.lightboxOverlay.addEventListener('click', onModalClose);\r\n\r\nfunction onOpenModal(e) {\r\n  e.preventDefault();\r\n\r\n  if (e.target.nodeName !== 'IMG') {\r\n    return\r\n  }\r\n\r\n  // if (\r\n  //   !e.target.classList.contains('gallery__link') &&\r\n  //   !e.target.classList.contains('gallery__image')\r\n  // ) {\r\n  //   return;\r\n  // }\r\n\r\n  galleryItems.forEach((el, index) => {\r\n    if (el.original === e.target.dataset.source) {\r\n      activeIndex = index;\r\n    }\r\n  });\r\n\r\n  refs.modalWindowRef.classList.add('is-open');\r\n  refs.lightboxImgRef.src = e.target.dataset.source;\r\n  refs.lightboxImgRef.alt = e.target.alt;\r\n  \r\n  window.addEventListener('keydown', keyboardManipulation);\r\n}\r\n\r\nfunction onModalClose(e) {\r\n  if (e?.target.nodeName === 'IMG') {\r\n    return;\r\n  }\r\n  refs.modalWindowRef.classList.remove(\"is-open\");\r\n  refs.lightboxImgRef.src = '';\r\n  refs.lightboxImgRef.alt = '';\r\n\r\n  window.removeEventListener('keydown', keyboardManipulation);\r\n}\r\n\r\n// function closeModalESC(e) {\r\n//   if (e.key !== 'Escape') {\r\n//     return;\r\n//   }\r\n//   refs.modalWindowRef.classList.remove('is-open');\r\n// }\r\n// window.addEventListener('keyup', closeModalESC);\r\n\r\nfunction keyboardManipulation({ key }) {\r\n  switch (key) {\r\n    case 'Escape':\r\n      onModalClose();\r\n      break;\r\n    \r\n    case activeIndex < galleryItems.length - 1 && 'ArrowRight':\r\n      activeIndex += 1;\r\n      refs.lightboxImgRef.src = galleryItems[activeIndex].original;\r\n      break;\r\n    case activeIndex > 0 && 'ArrowLeft':\r\n      activeIndex -= 1;\r\n      refs.lightboxImgRef.src = galleryItems[activeIndex].original;\r\n      break;\r\n    \r\n    case activeIndex === galleryItems.length - 1 && 'ArrowRight':\r\n      activeIndex = 0;\r\n      refs.lightboxImgRef.src = galleryItems[activeIndex].original;\r\n      break;\r\n    case activeIndex === 0 && 'ArrowLeft':\r\n      activeIndex = galleryItems.length - 1;\r\n      refs.lightboxImgRef.src = galleryItems[activeIndex].original;\r\n      break;\r\n    \r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\n\r\n// не работает, надо по фиксить\r\n\r\n// function openByEnter(e) {\r\n//   if (!e.target.classList.contains('gallery__link') || e.key !== 'Enter') {\r\n//     return;\r\n//   }\r\n//   onOpenModal();\r\n// window.addEventListener('keydown', openByEnter);\r\n// };"]}